<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1046px" preserveAspectRatio="none" style="width:1705px;height:1046px;background:#FFFFFF;" version="1.1" viewBox="0 0 1705 1046" width="1705px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="944.1406" style="stroke:#181818;stroke-width:1.0;" width="10" x="41" y="47.6094"/><rect fill="#FFFFFF" height="921.7891" style="stroke:#181818;stroke-width:1.0;" width="10" x="258" y="69.9609"/><rect fill="#FFFFFF" height="861.0859" style="stroke:#181818;stroke-width:1.0;" width="10" x="714" y="100.3125"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1092" y="130.6641"/><rect fill="#FFFFFF" height="147.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="1092" y="755.9922"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1200.5" y="268.0703"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1294.5" y="405.4766"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1401" y="786.3438"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1401" y="875.0469"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1401" y="933.3984"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1542" y="830.6953"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1659" y="711.6406"/><rect fill="none" height="79.0547" style="stroke:#000000;stroke-width:1.5;" width="777.5" x="10" y="159.6641"/><rect fill="none" height="79.0547" style="stroke:#000000;stroke-width:1.5;" width="777.5" x="10" y="297.0703"/><rect fill="none" height="79.0547" style="stroke:#000000;stroke-width:1.5;" width="777.5" x="10" y="434.4766"/><rect fill="none" height="61.7031" style="stroke:#000000;stroke-width:1.5;" width="385.5" x="650.5" y="527.5313"/><rect fill="none" height="79.0547" style="stroke:#000000;stroke-width:1.5;" width="777.5" x="10" y="603.2344"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="46" x2="46" y1="37.6094" y2="1009.75"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="263" x2="263" y1="37.6094" y2="1009.75"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="718.5" x2="718.5" y1="37.6094" y2="1009.75"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1097" x2="1097" y1="37.6094" y2="1009.75"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1205" x2="1205" y1="37.6094" y2="1009.75"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1299" x2="1299" y1="37.6094" y2="1009.75"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1406" x2="1406" y1="37.6094" y2="1009.75"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1547" x2="1547" y1="37.6094" y2="1009.75"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1664" x2="1664" y1="37.6094" y2="1009.75"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="52" x="20" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="27" y="26.5332">Route</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="52" x="20" y="1008.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="27" y="1030.2832">Route</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="132" x="197" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="204" y="26.5332">ElevadorController</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="132" x="197" y="1008.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="204" y="1030.2832">ElevadorController</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117" x="660.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="667.5" y="26.5332">ElevadorService</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117" x="660.5" y="1008.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="667.5" y="1030.2832">ElevadorService</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="104" x="1045" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="1052" y="26.5332">ElevadorRepo</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="104" x="1045" y="1008.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="1052" y="1030.2832">ElevadorRepo</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="93" x="1159" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="1166" y="26.5332">EdificioRepo</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="93" x="1159" y="1008.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="1166" y="1030.2832">EdificioRepo</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75" x="1262" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="1269" y="26.5332">PisoRepo</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75" x="1262" y="1008.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="1269" y="1030.2832">PisoRepo</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="118" x="1347" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="1354" y="26.5332">ElevadorMapper</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="118" x="1347" y="1008.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="104" x="1354" y="1030.2832">ElevadorMapper</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="144" x="1475" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="1482" y="26.5332">ElevadorPersistence</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="144" x="1475" y="1008.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="1482" y="1030.2832">ElevadorPersistence</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="70" x="1629" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="1636" y="26.5332">Elevador</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="70" x="1629" y="1008.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="1636" y="1030.2832">Elevador</text><rect fill="#FFFFFF" height="944.1406" style="stroke:#181818;stroke-width:1.0;" width="10" x="41" y="47.6094"/><rect fill="#FFFFFF" height="921.7891" style="stroke:#181818;stroke-width:1.0;" width="10" x="258" y="69.9609"/><rect fill="#FFFFFF" height="861.0859" style="stroke:#181818;stroke-width:1.0;" width="10" x="714" y="100.3125"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1092" y="130.6641"/><rect fill="#FFFFFF" height="147.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="1092" y="755.9922"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1200.5" y="268.0703"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1294.5" y="405.4766"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1401" y="786.3438"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1401" y="875.0469"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1401" y="933.3984"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1542" y="830.6953"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1659" y="711.6406"/><polygon fill="#181818" points="246,65.9609,256,69.9609,246,73.9609,250,69.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="51" x2="252" y1="69.9609" y2="69.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="58" y="65.1045">/createElevador</text><polygon fill="#181818" points="702,96.3125,712,100.3125,702,104.3125,706,100.3125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="268" x2="708" y1="100.3125" y2="100.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171" x="275" y="95.4561">createElevador(IElevadorDTO)</text><polygon fill="#181818" points="1080,126.6641,1090,130.6641,1080,134.6641,1084,130.6641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="724" x2="1086" y1="130.6641" y2="130.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="349" x="731" y="125.8076">findByNumeroIdentificativo(elevadorDTO.numeroIdentificativo)</text><polygon fill="#181818" points="735,140.6641,725,144.6641,735,148.6641,731,144.6641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="729" x2="1096" y1="144.6641" y2="144.6641"/><path d="M10,159.6641 L71,159.6641 L71,168.0156 L61,178.0156 L10,178.0156 L10,159.6641 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="79.0547" style="stroke:#000000;stroke-width:1.5;" width="777.5" x="10" y="159.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="25" y="174.1592">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="93" x="86" y="173.083">[elevador existe]</text><polygon fill="#181818" points="279,196.3672,269,200.3672,279,204.3672,275,200.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="273" x2="713" y1="200.3672" y2="200.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="391" x="285" y="195.5107">Envia erro com a mensagem: Já existe um elevador com o código X</text><polygon fill="#181818" points="62,226.7188,52,230.7188,62,234.7188,58,230.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="56" x2="257" y1="230.7188" y2="230.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183" x="68" y="225.8623">Envia status 403 (FORBIDDEN)</text><polygon fill="#181818" points="1188.5,264.0703,1198.5,268.0703,1188.5,272.0703,1192.5,268.0703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="724" x2="1194.5" y1="268.0703" y2="268.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201" x="731" y="263.2139">findByCodigo(elevadorDTO.edificio)</text><polygon fill="#181818" points="735,278.0703,725,282.0703,735,286.0703,731,282.0703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="729" x2="1204.5" y1="282.0703" y2="282.0703"/><path d="M10,297.0703 L71,297.0703 L71,305.4219 L61,315.4219 L10,315.4219 L10,297.0703 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="79.0547" style="stroke:#000000;stroke-width:1.5;" width="777.5" x="10" y="297.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="25" y="311.5654">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="163" x="86" y="310.4893">[edificio não existe/é inválido]</text><polygon fill="#181818" points="279,333.7734,269,337.7734,279,341.7734,275,337.7734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="273" x2="713" y1="337.7734" y2="337.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="422" x="285" y="332.917">Envia erro com a mensagem: Não existe nenhum edifício com o código X</text><polygon fill="#181818" points="62,364.125,52,368.125,62,372.125,58,368.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="56" x2="257" y1="368.125" y2="368.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183" x="68" y="363.2686">Envia status 403 (FORBIDDEN)</text><polygon fill="#181818" points="1282.5,401.4766,1292.5,405.4766,1282.5,409.4766,1286.5,405.4766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="724" x2="1288.5" y1="405.4766" y2="405.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="203" x="731" y="400.6201">findByEdificio(elevadorDTO.edificio)</text><polygon fill="#181818" points="735,415.4766,725,419.4766,735,423.4766,731,419.4766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="729" x2="1298.5" y1="419.4766" y2="419.4766"/><path d="M10,434.4766 L71,434.4766 L71,442.8281 L61,452.8281 L10,452.8281 L10,434.4766 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="79.0547" style="stroke:#000000;stroke-width:1.5;" width="777.5" x="10" y="434.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="25" y="448.9717">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="130" x="86" y="447.8955">[edifício não tem pisos]</text><polygon fill="#181818" points="279,471.1797,269,475.1797,279,479.1797,275,475.1797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="273" x2="713" y1="475.1797" y2="475.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="328" x="285" y="470.3232">Envia erro com a mensagem: O edificio X não tem pisos.</text><polygon fill="#181818" points="62,501.5313,52,505.5313,62,509.5313,58,505.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="56" x2="257" y1="505.5313" y2="505.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183" x="68" y="500.6748">Envia status 403 (FORBIDDEN)</text><path d="M650.5,527.5313 L723.5,527.5313 L723.5,535.8828 L713.5,545.8828 L650.5,545.8828 L650.5,527.5313 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="61.7031" style="stroke:#000000;stroke-width:1.5;" width="385.5" x="650.5" y="527.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="665.5" y="542.0264">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="264" x="738.5" y="540.9502">[todos os pisos de elevadorDTO.pisosServidos]</text><line style="stroke:#181818;stroke-width:1.0;" x1="724" x2="766" y1="568.2344" y2="568.2344"/><line style="stroke:#181818;stroke-width:1.0;" x1="766" x2="766" y1="568.2344" y2="581.2344"/><line style="stroke:#181818;stroke-width:1.0;" x1="725" x2="766" y1="581.2344" y2="581.2344"/><polygon fill="#181818" points="735,577.2344,725,581.2344,735,585.2344,731,581.2344" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="293" x="731" y="563.3779">verifica se o piso pertence ao elevadorDTO.edificio.</text><path d="M10,603.2344 L71,603.2344 L71,611.5859 L61,621.5859 L10,621.5859 L10,603.2344 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="79.0547" style="stroke:#000000;stroke-width:1.5;" width="777.5" x="10" y="603.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="25" y="617.7295">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="240" x="86" y="616.6533">[um qualquer piso não pertence ao edificio]</text><polygon fill="#181818" points="279,639.9375,269,643.9375,279,647.9375,275,643.9375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="273" x2="713" y1="643.9375" y2="643.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="380" x="285" y="639.0811">Envia erro com a mensagem: O piso X não pertence ao edificio Y.</text><polygon fill="#181818" points="62,670.2891,52,674.2891,62,678.2891,58,674.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="56" x2="257" y1="674.2891" y2="674.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183" x="68" y="669.4326">Envia status 403 (FORBIDDEN)</text><polygon fill="#181818" points="1647,707.6406,1657,711.6406,1647,715.6406,1651,711.6406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="724" x2="1653" y1="711.6406" y2="711.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="731" y="706.7842">elevador = create(elevadorDTO)</text><polygon fill="#181818" points="735,721.6406,725,725.6406,735,729.6406,731,725.6406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="729" x2="1663" y1="725.6406" y2="725.6406"/><polygon fill="#181818" points="1080,751.9922,1090,755.9922,1080,759.9922,1084,755.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="724" x2="1086" y1="755.9922" y2="755.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81" x="731" y="751.1357">save(elevador)</text><polygon fill="#181818" points="1389,782.3438,1399,786.3438,1389,790.3438,1393,786.3438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1102" x2="1395" y1="786.3438" y2="786.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="1109" y="781.4873">toPersistence(elevador)</text><polygon fill="#181818" points="1113,796.3438,1103,800.3438,1113,804.3438,1109,800.3438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1107" x2="1405" y1="800.3438" y2="800.3438"/><polygon fill="#181818" points="1530,826.6953,1540,830.6953,1530,834.6953,1534,830.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1102" x2="1536" y1="830.6953" y2="830.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="1109" y="825.8389">create(elevadorCreated)</text><polygon fill="#181818" points="1113,840.6953,1103,844.6953,1113,848.6953,1109,844.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1107" x2="1546" y1="844.6953" y2="844.6953"/><polygon fill="#181818" points="1389,871.0469,1399,875.0469,1389,879.0469,1393,875.0469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1102" x2="1395" y1="875.0469" y2="875.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="1109" y="870.1904">toDomain(elevadorCreated)</text><polygon fill="#181818" points="1113,885.0469,1103,889.0469,1113,893.0469,1109,889.0469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1107" x2="1405" y1="889.0469" y2="889.0469"/><polygon fill="#181818" points="735,899.0469,725,903.0469,735,907.0469,731,903.0469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="729" x2="1096" y1="903.0469" y2="903.0469"/><polygon fill="#181818" points="1389,929.3984,1399,933.3984,1389,937.3984,1393,933.3984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="724" x2="1395" y1="933.3984" y2="933.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="731" y="928.542">toDTO(elevador)</text><polygon fill="#181818" points="735,943.3984,725,947.3984,735,951.3984,731,947.3984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="729" x2="1405" y1="947.3984" y2="947.3984"/><polygon fill="#181818" points="279,957.3984,269,961.3984,279,965.3984,275,961.3984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="273" x2="718" y1="961.3984" y2="961.3984"/><polygon fill="#181818" points="57,987.75,47,991.75,57,995.75,53,991.75" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="51" x2="262" y1="991.75" y2="991.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="63" y="986.8936">Envia um código 201 (OK)</text><!--MD5=[d75c79283bfbb9e21978a56a6e30cae2]
@startuml sd

participant Route as route
participant ElevadorController as ctrl
participant ElevadorService as svc
participant ElevadorRepo as repoEle
participant EdificioRepo as repoEdi
participant PisoRepo as repoPis
participant ElevadorMapper as mapper
participant ElevadorPersistence as pers
participant Elevador as model

activate route
route -> ctrl : /createElevador
activate ctrl
ctrl -> svc : createElevador(IElevadorDTO)
activate svc
svc -> repoEle : findByNumeroIdentificativo(elevadorDTO.numeroIdentificativo)
activate repoEle
repoEle - -> svc
deactivate repoEle
alt elevador existe
    svc - -> ctrl : Envia erro com a mensagem: Já existe um elevador com o código X
    ctrl - -> route : Envia status 403 (FORBIDDEN)
end
svc -> repoEdi : findByCodigo(elevadorDTO.edificio)
activate repoEdi
repoEdi - -> svc
deactivate repoEdi
alt edificio não existe/é inválido
    svc - -> ctrl : Envia erro com a mensagem: Não existe nenhum edifício com o código X
    ctrl - -> route : Envia status 403 (FORBIDDEN)
end
svc -> repoPis : findByEdificio(elevadorDTO.edificio)
activate repoPis
repoPis - -> svc
deactivate repoPis
alt edifício não tem pisos
    svc - -> ctrl : Envia erro com a mensagem: O edificio X não tem pisos.
    ctrl - -> route : Envia status 403 (FORBIDDEN)
end
loop todos os pisos de elevadorDTO.pisosServidos
    svc -> svc : verifica se o piso pertence ao elevadorDTO.edificio.
end
alt um qualquer piso não pertence ao edificio
    svc - -> ctrl : Envia erro com a mensagem: O piso X não pertence ao edificio Y.
    ctrl - -> route : Envia status 403 (FORBIDDEN)
end
svc -> model : elevador = create(elevadorDTO)
activate model
model - -> svc
deactivate model
svc -> repoEle : save(elevador)
activate repoEle
repoEle -> mapper : toPersistence(elevador)
activate mapper
mapper - -> repoEle
deactivate mapper
repoEle -> pers : create(elevadorCreated)
activate pers
pers - -> repoEle
deactivate pers
repoEle -> mapper : toDomain(elevadorCreated)
activate mapper
mapper - -> repoEle
deactivate mapper
repoEle - -> svc
deactivate repoEle
svc -> mapper : toDTO(elevador)
activate mapper
mapper - -> svc
deactivate mapper
svc - -> ctrl
deactivate svc
ctrl - -> route : Envia um código 201 (OK)
deactivate ctrl
deactivate route



@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 WEST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>