<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="873px" preserveAspectRatio="none" style="width:1524px;height:873px;background:#FFFFFF;" version="1.1" viewBox="0 0 1524 873" width="1524px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="771.0313" style="stroke:#181818;stroke-width:1.0;" width="10" x="41" y="47.6094"/><rect fill="#FFFFFF" height="748.6797" style="stroke:#181818;stroke-width:1.0;" width="10" x="258" y="69.9609"/><rect fill="#FFFFFF" height="643.625" style="stroke:#181818;stroke-width:1.0;" width="10" x="702" y="144.6641"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1003" y="219.3672"/><rect fill="#FFFFFF" height="191.4063" style="stroke:#181818;stroke-width:1.0;" width="10" x="1003" y="538.5313"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1088.5" y="356.7734"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1181" y="613.2344"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1181" y="701.9375"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1181" y="760.2891"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1282.5" y="657.5859"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1400" y="100.3125"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1400" y="175.0156"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1400" y="568.8828"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1492" y="494.1797"/><rect fill="none" height="79.0547" style="stroke:#000000;stroke-width:1.5;" width="751.5" x="10" y="248.3672"/><rect fill="none" height="79.0547" style="stroke:#000000;stroke-width:1.5;" width="751.5" x="10" y="385.7734"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="46" x2="46" y1="37.6094" y2="836.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="263" x2="263" y1="37.6094" y2="836.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="706.5" x2="706.5" y1="37.6094" y2="836.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1008" x2="1008" y1="37.6094" y2="836.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1093" x2="1093" y1="37.6094" y2="836.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1186" x2="1186" y1="37.6094" y2="836.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1287" x2="1287" y1="37.6094" y2="836.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1405" x2="1405" y1="37.6094" y2="836.6406"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1497" x2="1497" y1="37.6094" y2="836.6406"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="52" x="20" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="27" y="26.5332">Route</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="52" x="20" y="835.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="27" y="857.1738">Route</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="104" x="211" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="218" y="26.5332">SalaController</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="104" x="211" y="835.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="218" y="857.1738">SalaController</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="89" x="662.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="669.5" y="26.5332">SalaService</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="89" x="662.5" y="835.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="669.5" y="857.1738">SalaService</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="970" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="977" y="26.5332">SalaRepo</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="76" x="970" y="835.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="977" y="857.1738">SalaRepo</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75" x="1056" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="1063" y="26.5332">PisoRepo</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75" x="1056" y="835.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="1063" y="857.1738">PisoRepo</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90" x="1141" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="1148" y="26.5332">SalaMapper</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90" x="1141" y="835.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="1148" y="857.1738">SalaMapper</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="93" x="1241" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="1248" y="26.5332">SalaSchema</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="93" x="1241" y="835.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="1248" y="857.1738">SalaSchema</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122" x="1344" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="1351" y="26.5332">ConfigurationFile</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122" x="1344" y="835.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="1351" y="857.1738">ConfigurationFile</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="42" x="1476" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="1483" y="26.5332">Sala</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="42" x="1476" y="835.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="1483" y="857.1738">Sala</text><rect fill="#FFFFFF" height="771.0313" style="stroke:#181818;stroke-width:1.0;" width="10" x="41" y="47.6094"/><rect fill="#FFFFFF" height="748.6797" style="stroke:#181818;stroke-width:1.0;" width="10" x="258" y="69.9609"/><rect fill="#FFFFFF" height="643.625" style="stroke:#181818;stroke-width:1.0;" width="10" x="702" y="144.6641"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1003" y="219.3672"/><rect fill="#FFFFFF" height="191.4063" style="stroke:#181818;stroke-width:1.0;" width="10" x="1003" y="538.5313"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1088.5" y="356.7734"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1181" y="613.2344"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1181" y="701.9375"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1181" y="760.2891"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1282.5" y="657.5859"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1400" y="100.3125"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1400" y="175.0156"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1400" y="568.8828"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="1492" y="494.1797"/><polygon fill="#181818" points="246,65.9609,256,69.9609,246,73.9609,250,69.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="51" x2="252" y1="69.9609" y2="69.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="58" y="65.1045">/createSala</text><polygon fill="#181818" points="1388,96.3125,1398,100.3125,1388,104.3125,1392,100.3125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="268" x2="1394" y1="100.3125" y2="100.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="275" y="95.4561">injeta o serviço do sala</text><polygon fill="#181818" points="279,110.3125,269,114.3125,279,118.3125,275,114.3125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="273" x2="1404" y1="114.3125" y2="114.3125"/><polygon fill="#181818" points="690,140.6641,700,144.6641,690,148.6641,694,144.6641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="268" x2="696" y1="144.6641" y2="144.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="275" y="139.8076">createSala(salaDTO)</text><polygon fill="#181818" points="1388,171.0156,1398,175.0156,1388,179.0156,1392,175.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="712" x2="1394" y1="175.0156" y2="175.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="719" y="170.1592">injeta o repositório do sala</text><polygon fill="#181818" points="723,185.0156,713,189.0156,723,193.0156,719,189.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="717" x2="1404" y1="189.0156" y2="189.0156"/><polygon fill="#181818" points="991,215.3672,1001,219.3672,991,223.3672,995,219.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="712" x2="997" y1="219.3672" y2="219.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="272" x="719" y="214.5107">sala = findByDesignacao(salaDTO.designacao)</text><polygon fill="#181818" points="723,229.3672,713,233.3672,723,237.3672,719,233.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="717" x2="1007" y1="233.3672" y2="233.3672"/><path d="M10,248.3672 L71,248.3672 L71,256.7188 L61,266.7188 L10,266.7188 L10,248.3672 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="79.0547" style="stroke:#000000;stroke-width:1.5;" width="751.5" x="10" y="248.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="25" y="262.8623">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="79" x="86" y="261.7861">[sala já existe]</text><polygon fill="#181818" points="279,285.0703,269,289.0703,279,293.0703,275,289.0703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="273" x2="701" y1="289.0703" y2="289.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="403" x="285" y="284.2139">Envia erro com a mensagem: Já existe uma sala com a designação X</text><polygon fill="#181818" points="62,315.4219,52,319.4219,62,323.4219,58,319.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="56" x2="257" y1="319.4219" y2="319.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183" x="68" y="314.5654">Envia status 403 (FORBIDDEN)</text><polygon fill="#181818" points="1076.5,352.7734,1086.5,356.7734,1076.5,360.7734,1080.5,356.7734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="712" x2="1082.5" y1="356.7734" y2="356.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190" x="719" y="351.917">findByDesignacao(salaDTO.piso)</text><polygon fill="#181818" points="723,366.7734,713,370.7734,723,374.7734,719,370.7734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="717" x2="1092.5" y1="370.7734" y2="370.7734"/><path d="M10,385.7734 L71,385.7734 L71,394.125 L61,404.125 L10,404.125 L10,385.7734 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="79.0547" style="stroke:#000000;stroke-width:1.5;" width="751.5" x="10" y="385.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="25" y="400.2686">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="142" x="86" y="399.1924">[piso inválido/inexistente]</text><polygon fill="#181818" points="279,422.4766,269,426.4766,279,430.4766,275,426.4766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="273" x2="701" y1="426.4766" y2="426.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="410" x="285" y="421.6201">Envia erro com a mensagem: Não existe um piso com a designação X.</text><polygon fill="#181818" points="62,452.8281,52,456.8281,62,460.8281,58,456.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="56" x2="257" y1="456.8281" y2="456.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183" x="68" y="451.9717">Envia status 403 (FORBIDDEN)</text><polygon fill="#181818" points="1480,490.1797,1490,494.1797,1480,498.1797,1484,494.1797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="712" x2="1486" y1="494.1797" y2="494.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="719" y="489.3232">sala = create(salaDTO)</text><polygon fill="#181818" points="723,504.1797,713,508.1797,723,512.1797,719,508.1797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="717" x2="1496" y1="508.1797" y2="508.1797"/><polygon fill="#181818" points="991,534.5313,1001,538.5313,991,542.5313,995,538.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="712" x2="997" y1="538.5313" y2="538.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="719" y="533.6748">save(sala)</text><polygon fill="#181818" points="1388,564.8828,1398,568.8828,1388,572.8828,1392,568.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1013" x2="1394" y1="568.8828" y2="568.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="1020" y="564.0264">injeta o schema do sala</text><polygon fill="#181818" points="1024,578.8828,1014,582.8828,1024,586.8828,1020,582.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1018" x2="1404" y1="582.8828" y2="582.8828"/><polygon fill="#181818" points="1169,609.2344,1179,613.2344,1169,617.2344,1173,613.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1013" x2="1175" y1="613.2344" y2="613.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="1020" y="608.3779">toPersistence(sala)</text><polygon fill="#181818" points="1024,623.2344,1014,627.2344,1024,631.2344,1020,627.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1018" x2="1185" y1="627.2344" y2="627.2344"/><polygon fill="#181818" points="1270.5,653.5859,1280.5,657.5859,1270.5,661.5859,1274.5,657.5859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1013" x2="1276.5" y1="657.5859" y2="657.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="1020" y="652.7295">create(salaCreated)</text><polygon fill="#181818" points="1024,667.5859,1014,671.5859,1024,675.5859,1020,671.5859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1018" x2="1286.5" y1="671.5859" y2="671.5859"/><polygon fill="#181818" points="1169,697.9375,1179,701.9375,1169,705.9375,1173,701.9375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1013" x2="1175" y1="701.9375" y2="701.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="1020" y="697.0811">toDomain(salaCreated)</text><polygon fill="#181818" points="1024,711.9375,1014,715.9375,1024,719.9375,1020,715.9375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1018" x2="1185" y1="715.9375" y2="715.9375"/><polygon fill="#181818" points="723,725.9375,713,729.9375,723,733.9375,719,729.9375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="717" x2="1007" y1="729.9375" y2="729.9375"/><polygon fill="#181818" points="1169,756.2891,1179,760.2891,1169,764.2891,1173,760.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="712" x2="1175" y1="760.2891" y2="760.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="719" y="755.4326">toDTO(sala)</text><polygon fill="#181818" points="723,770.2891,713,774.2891,723,778.2891,719,774.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="717" x2="1185" y1="774.2891" y2="774.2891"/><polygon fill="#181818" points="279,784.2891,269,788.2891,279,792.2891,275,788.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="273" x2="706" y1="788.2891" y2="788.2891"/><polygon fill="#181818" points="57,814.6406,47,818.6406,57,822.6406,53,818.6406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="51" x2="262" y1="818.6406" y2="818.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="63" y="813.7842">Envia um código 201 (OK)</text><!--MD5=[6896f76f54d2e6b03aa13818cb9387d6]
@startuml sd

participant Route as route
participant SalaController as ctrl
participant SalaService as svc
participant SalaRepo as repoSal
participant PisoRepo as repoPis
participant SalaMapper as mapper
participant SalaSchema as schema
participant ConfigurationFile as conf
participant Sala as model

activate route
route -> ctrl : /createSala
activate ctrl
ctrl -> conf : injeta o serviço do sala
activate conf
conf - -> ctrl
deactivate conf
ctrl -> svc : createSala(salaDTO)
activate svc
svc -> conf : injeta o repositório do sala
activate conf
conf - -> svc
deactivate conf
svc -> repoSal : sala = findByDesignacao(salaDTO.designacao)
activate repoSal
repoSal - -> svc
deactivate repoSal
alt sala já existe
    svc - -> ctrl : Envia erro com a mensagem: Já existe uma sala com a designação X
    ctrl - -> route : Envia status 403 (FORBIDDEN)
end
svc -> repoPis : findByDesignacao(salaDTO.piso)
activate repoPis
repoPis - -> svc
deactivate repoPis
alt piso inválido/inexistente
    svc - -> ctrl : Envia erro com a mensagem: Não existe um piso com a designação X.
    ctrl - -> route : Envia status 403 (FORBIDDEN)
end
svc -> model : sala = create(salaDTO)
activate model
model - -> svc
deactivate model
svc -> repoSal : save(sala)
activate repoSal
repoSal -> conf : injeta o schema do sala
activate conf
conf - -> repoSal
deactivate conf
repoSal -> mapper : toPersistence(sala)
activate mapper
mapper - -> repoSal
deactivate mapper
repoSal -> schema : create(salaCreated)
activate schema
schema - -> repoSal
deactivate schema
repoSal -> mapper : toDomain(salaCreated)
activate mapper
mapper - -> repoSal
deactivate mapper
repoSal - -> svc
deactivate repoSal
svc -> mapper : toDTO(sala)
activate mapper
mapper - -> svc
deactivate mapper
svc - -> ctrl
deactivate svc
ctrl - -> route : Envia um código 201 (OK)
deactivate ctrl
deactivate route



@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 WEST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>