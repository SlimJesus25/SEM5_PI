<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1252px" preserveAspectRatio="none" style="width:1416px;height:1252px;background:#FFFFFF;" version="1.1" viewBox="0 0 1416 1252" width="1416px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="1137.3281" style="stroke:#181818;stroke-width:1.0;" width="10" x="54.5" y="69.9609"/><rect fill="#FFFFFF" height="1136.3281" style="stroke:#181818;stroke-width:1.0;" width="10" x="313.5" y="69.9609"/><rect fill="#FFFFFF" height="928.3828" style="stroke:#181818;stroke-width:1.0;" width="10" x="476.5" y="161.0156"/><rect fill="#FFFFFF" height="212.4609" style="stroke:#181818;stroke-width:1.0;" width="10" x="694.5" y="312.7734"/><rect fill="#FFFFFF" height="199.9453" style="stroke:#181818;stroke-width:1.0;" width="10" x="694.5" y="798.3984"/><rect fill="#FFFFFF" height="212.4609" style="stroke:#181818;stroke-width:1.0;" width="10" x="788.5" y="555.5859"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="889.5" y="464.5313"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="889.5" y="1028.6953"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="990" y="403.8281"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="990" y="828.75"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="990" y="930.6406"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1099.5" y="707.3438"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1218" y="646.6406"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1344" y="100.3125"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1344" y="191.3672"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1344" y="252.0703"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1344" y="343.125"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1344" y="585.9375"/><rect fill="none" height="94.8906" style="stroke:#000000;stroke-width:1.5;" width="399" x="652" y="874.1016"/><rect fill="none" height="94.8906" style="stroke:#000000;stroke-width:1.5;" width="370" x="10" y="1104.3984"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="59" x2="59" y1="37.6094" y2="1216.2891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="318" x2="318" y1="37.6094" y2="1216.2891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="481.5" x2="481.5" y1="37.6094" y2="1216.2891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="699" x2="699" y1="37.6094" y2="1216.2891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="793" x2="793" y1="37.6094" y2="1216.2891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="894" x2="894" y1="37.6094" y2="1216.2891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="995" x2="995" y1="37.6094" y2="1216.2891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1104" x2="1104" y1="37.6094" y2="1216.2891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1223" x2="1223" y1="37.6094" y2="1216.2891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1349" x2="1349" y1="37.6094" y2="1216.2891"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="79" x="20" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="27" y="26.5332">PisoRoute</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="79" x="20" y="1215.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="27" y="1236.8223">PisoRoute</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="267" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="274" y="26.5332">PisoController</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="267" y="1215.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="274" y="1236.8223">PisoController</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="88" x="437.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="444.5" y="26.5332">PisoService</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="88" x="437.5" y="1215.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="444.5" y="1236.8223">PisoService</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75" x="662" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="669" y="26.5332">PisoRepo</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75" x="662" y="1215.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="669" y="1236.8223">PisoRepo</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="93" x="747" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="754" y="26.5332">EdificioRepo</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="93" x="747" y="1215.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="754" y="1236.8223">EdificioRepo</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="89" x="850" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="857" y="26.5332">PisoMapper</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="89" x="850" y="1215.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="857" y="1236.8223">PisoMapper</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92" x="949" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="956" y="26.5332">PisoSchema</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="92" x="949" y="1215.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="956" y="1236.8223">PisoSchema</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="107" x="1051" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="1058" y="26.5332">EdificioMapper</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="107" x="1051" y="1215.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="93" x="1058" y="1236.8223">EdificioMapper</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="110" x="1168" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="1175" y="26.5332">EdificioSchema</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="110" x="1168" y="1215.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="1175" y="1236.8223">EdificioSchema</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122" x="1288" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="1295" y="26.5332">ConfigurationFile</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122" x="1288" y="1215.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="1295" y="1236.8223">ConfigurationFile</text><rect fill="#FFFFFF" height="1137.3281" style="stroke:#181818;stroke-width:1.0;" width="10" x="54.5" y="69.9609"/><rect fill="#FFFFFF" height="1136.3281" style="stroke:#181818;stroke-width:1.0;" width="10" x="313.5" y="69.9609"/><rect fill="#FFFFFF" height="928.3828" style="stroke:#181818;stroke-width:1.0;" width="10" x="476.5" y="161.0156"/><rect fill="#FFFFFF" height="212.4609" style="stroke:#181818;stroke-width:1.0;" width="10" x="694.5" y="312.7734"/><rect fill="#FFFFFF" height="199.9453" style="stroke:#181818;stroke-width:1.0;" width="10" x="694.5" y="798.3984"/><rect fill="#FFFFFF" height="212.4609" style="stroke:#181818;stroke-width:1.0;" width="10" x="788.5" y="555.5859"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="889.5" y="464.5313"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="889.5" y="1028.6953"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="990" y="403.8281"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="990" y="828.75"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="990" y="930.6406"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1099.5" y="707.3438"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1218" y="646.6406"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1344" y="100.3125"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1344" y="191.3672"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1344" y="252.0703"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1344" y="343.125"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1344" y="585.9375"/><polygon fill="#181818" points="301.5,65.9609,311.5,69.9609,301.5,73.9609,305.5,69.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="64.5" x2="307.5" y1="69.9609" y2="69.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="71.5" y="65.1045">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="82.5" y="65.1045">updatePiso(req,res,next)</text><polygon fill="#181818" points="1332,96.3125,1342,100.3125,1332,104.3125,1336,100.3125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="323.5" x2="1338" y1="100.3125" y2="100.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="330.5" y="95.4561">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="341.5" y="95.4561">injeta o serviço do piso</text><polygon fill="#181818" points="334.5,126.6641,324.5,130.6641,334.5,134.6641,330.5,130.6641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="328.5" x2="1348" y1="130.6641" y2="130.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="340.5" y="125.8076">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="351.5" y="125.8076"> </text><polygon fill="#181818" points="464.5,157.0156,474.5,161.0156,464.5,165.0156,468.5,161.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="323.5" x2="470.5" y1="161.0156" y2="161.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="330.5" y="156.1592">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="341.5" y="156.1592">updatePiso(pisoDTO)</text><polygon fill="#181818" points="1332,187.3672,1342,191.3672,1332,195.3672,1336,191.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="486.5" x2="1338" y1="191.3672" y2="191.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="493.5" y="186.5107">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="504.5" y="186.5107">injeta o repositório do piso</text><polygon fill="#181818" points="497.5,217.7188,487.5,221.7188,497.5,225.7188,493.5,221.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="491.5" x2="1348" y1="221.7188" y2="221.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="503.5" y="216.8623">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="514.5" y="216.8623"> </text><polygon fill="#181818" points="1332,248.0703,1342,252.0703,1332,256.0703,1336,252.0703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="486.5" x2="1338" y1="252.0703" y2="252.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="493.5" y="247.2139">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="504.5" y="247.2139">injeta o repositório do edificio</text><polygon fill="#181818" points="497.5,278.4219,487.5,282.4219,497.5,286.4219,493.5,282.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="491.5" x2="1348" y1="282.4219" y2="282.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="503.5" y="277.5654">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="514.5" y="277.5654"> </text><polygon fill="#181818" points="682.5,308.7734,692.5,312.7734,682.5,316.7734,686.5,312.7734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="486.5" x2="688.5" y1="312.7734" y2="312.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="493.5" y="307.917">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="504.5" y="307.917">findByDesignacao(designacao)</text><polygon fill="#181818" points="1332,339.125,1342,343.125,1332,347.125,1336,343.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="704.5" x2="1338" y1="343.125" y2="343.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="711.5" y="338.2686">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="729.5" y="338.2686">injeta o schema dos pisos</text><polygon fill="#181818" points="715.5,369.4766,705.5,373.4766,715.5,377.4766,711.5,373.4766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="709.5" x2="1348" y1="373.4766" y2="373.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="721.5" y="368.6201">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="739.5" y="368.6201"> </text><polygon fill="#181818" points="978,399.8281,988,403.8281,978,407.8281,982,403.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="704.5" x2="984" y1="403.8281" y2="403.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="711.5" y="398.9717">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="729.5" y="398.9717">findOne(query)</text><polygon fill="#181818" points="715.5,430.1797,705.5,434.1797,715.5,438.1797,711.5,434.1797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="709.5" x2="994" y1="434.1797" y2="434.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="721.5" y="429.3232">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="739.5" y="429.3232"> </text><polygon fill="#181818" points="877.5,460.5313,887.5,464.5313,877.5,468.5313,881.5,464.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="704.5" x2="883.5" y1="464.5313" y2="464.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="711.5" y="459.6748">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="729.5" y="459.6748">toDomain(pisoRecord)</text><polygon fill="#181818" points="715.5,490.8828,705.5,494.8828,715.5,498.8828,711.5,494.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="709.5" x2="893.5" y1="494.8828" y2="494.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="721.5" y="490.0264">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="739.5" y="490.0264"> </text><polygon fill="#181818" points="497.5,521.2344,487.5,525.2344,497.5,529.2344,493.5,525.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="491.5" x2="698.5" y1="525.2344" y2="525.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="503.5" y="520.3779">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="521.5" y="520.3779"> </text><polygon fill="#181818" points="776.5,551.5859,786.5,555.5859,776.5,559.5859,780.5,555.5859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="486.5" x2="782.5" y1="555.5859" y2="555.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="493.5" y="550.7295">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="511.5" y="550.7295">findByCodigo(edificio)</text><polygon fill="#181818" points="1332,581.9375,1342,585.9375,1332,589.9375,1336,585.9375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="798.5" x2="1338" y1="585.9375" y2="585.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="805.5" y="581.0811">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="823.5" y="581.0811">injeta o schema dos edificios</text><polygon fill="#181818" points="809.5,612.2891,799.5,616.2891,809.5,620.2891,805.5,616.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="803.5" x2="1348" y1="616.2891" y2="616.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="815.5" y="611.4326">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="833.5" y="611.4326"> </text><polygon fill="#181818" points="1206,642.6406,1216,646.6406,1206,650.6406,1210,646.6406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="798.5" x2="1212" y1="646.6406" y2="646.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="805.5" y="641.7842">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="823.5" y="641.7842">findOne(query)</text><polygon fill="#181818" points="809.5,672.9922,799.5,676.9922,809.5,680.9922,805.5,676.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="803.5" x2="1222" y1="676.9922" y2="676.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="815.5" y="672.1357">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="833.5" y="672.1357"> </text><polygon fill="#181818" points="1087.5,703.3438,1097.5,707.3438,1087.5,711.3438,1091.5,707.3438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="798.5" x2="1093.5" y1="707.3438" y2="707.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="805.5" y="702.4873">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="823.5" y="702.4873">toDomain(edificioRecord)</text><polygon fill="#181818" points="809.5,733.6953,799.5,737.6953,809.5,741.6953,805.5,737.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="803.5" x2="1103.5" y1="737.6953" y2="737.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="815.5" y="732.8389">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="833.5" y="732.8389"> </text><polygon fill="#181818" points="497.5,764.0469,487.5,768.0469,497.5,772.0469,493.5,768.0469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="491.5" x2="792.5" y1="768.0469" y2="768.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="503.5" y="763.1904">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="521.5" y="763.1904"> </text><polygon fill="#181818" points="682.5,794.3984,692.5,798.3984,682.5,802.3984,686.5,798.3984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="486.5" x2="688.5" y1="798.3984" y2="798.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="493.5" y="793.542">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="511.5" y="793.542">save(piso)</text><polygon fill="#181818" points="978,824.75,988,828.75,978,832.75,982,828.75" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="704.5" x2="984" y1="828.75" y2="828.75"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="711.5" y="823.8936">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="729.5" y="823.8936">findOne(query)</text><polygon fill="#181818" points="715.5,855.1016,705.5,859.1016,715.5,863.1016,711.5,859.1016" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="709.5" x2="994" y1="859.1016" y2="859.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="721.5" y="854.2451">27</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="739.5" y="854.2451"> </text><path d="M652,874.1016 L713,874.1016 L713,882.4531 L703,892.4531 L652,892.4531 L652,874.1016 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="94.8906" style="stroke:#000000;stroke-width:1.5;" width="399" x="652" y="874.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="667" y="888.5967">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="55" x="728" y="887.5205">[cria piso]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="652" x2="1051" y1="893.4531" y2="893.4531"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="76" x="657" y="904.8721">[atualiza piso]</text><polygon fill="#181818" points="978,926.6406,988,930.6406,978,934.6406,982,930.6406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="704.5" x2="984" y1="930.6406" y2="930.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="711.5" y="925.7842">28</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34" x="729.5" y="925.7842">save()</text><polygon fill="#181818" points="715.5,956.9922,705.5,960.9922,715.5,964.9922,711.5,960.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="709.5" x2="994" y1="960.9922" y2="960.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="721.5" y="956.1357">29</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="739.5" y="956.1357"> </text><polygon fill="#181818" points="497.5,994.3438,487.5,998.3438,497.5,1002.3438,493.5,998.3438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="491.5" x2="698.5" y1="998.3438" y2="998.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="503.5" y="993.4873">30</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="521.5" y="993.4873"> </text><polygon fill="#181818" points="877.5,1024.6953,887.5,1028.6953,877.5,1032.6953,881.5,1028.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="486.5" x2="883.5" y1="1028.6953" y2="1028.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="493.5" y="1023.8389">31</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="511.5" y="1023.8389">toDTO(piso)</text><polygon fill="#181818" points="497.5,1055.0469,487.5,1059.0469,497.5,1063.0469,493.5,1059.0469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="491.5" x2="893.5" y1="1059.0469" y2="1059.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="503.5" y="1054.1904">32</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="521.5" y="1054.1904"> </text><polygon fill="#181818" points="334.5,1085.3984,324.5,1089.3984,334.5,1093.3984,330.5,1089.3984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="328.5" x2="480.5" y1="1089.3984" y2="1089.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="340.5" y="1084.542">33</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="358.5" y="1084.542"> </text><path d="M10,1104.3984 L71,1104.3984 L71,1112.75 L61,1122.75 L10,1122.75 L10,1104.3984 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="94.8906" style="stroke:#000000;stroke-width:1.5;" width="370" x="10" y="1104.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="25" y="1118.8936">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="102" x="86" y="1117.8174">[caso de sucesso]</text><polygon fill="#181818" points="75.5,1141.1016,65.5,1145.1016,75.5,1149.1016,71.5,1145.1016" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="69.5" x2="312.5" y1="1145.1016" y2="1145.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="81.5" y="1140.2451">34</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="99.5" y="1140.2451">Envia um código 201 (PUT)</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="380" y1="1154.1016" y2="1154.1016"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="112" x="15" y="1165.5205">[caso de insucesso]</text><polygon fill="#181818" points="75.5,1187.2891,65.5,1191.2891,75.5,1195.2891,71.5,1191.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="69.5" x2="312.5" y1="1191.2891" y2="1191.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="81.5" y="1186.4326">35</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="207" x="99.5" y="1186.4326">Envia um código 404 (NOT FOUND)</text><!--MD5=[52d95cb734bcee1b579fc93ee3dad289]
@startuml sd
autonumber

participant PisoRoute as route

participant PisoController as ctrl

participant PisoService as svc

participant PisoRepo as repo
participant EdificioRepo as erepo
participant PisoMapper as mapper

participant PisoSchema as schema
participant EdificioMapper as emapper

participant EdificioSchema as eschema
participant ConfigurationFile as conf


route -> ctrl++ : updatePiso(req,res,next)
route++
ctrl -> conf : injeta o serviço do piso
conf++
conf - -> ctrl
conf- -
ctrl -> svc : updatePiso(pisoDTO)
svc++
svc -> conf : injeta o repositório do piso
conf++
conf - -> svc
conf- -
svc -> conf : injeta o repositório do edificio
conf++
conf - -> svc
conf- -
svc -> repo : findByDesignacao(designacao)
repo++
repo -> conf : injeta o schema dos pisos
conf++
conf - -> repo
conf- -
repo -> schema : findOne(query)
schema++
schema - -> repo
schema- -
repo -> mapper : toDomain(pisoRecord)
mapper++
mapper - -> repo
mapper- -
repo - -> svc
repo- -

svc -> erepo : findByCodigo(edificio)
erepo++
erepo -> conf : injeta o schema dos edificios
conf++
conf - -> erepo
conf- -
erepo -> eschema : findOne(query)
eschema++
eschema - -> erepo
eschema- -
erepo -> emapper : toDomain(edificioRecord)
emapper++
emapper - -> erepo
emapper- -
erepo - -> svc
erepo- -

svc -> repo: save(piso)
repo++
repo -> schema : findOne(query)
schema++
schema - -> repo
schema- -
alt cria piso
else atualiza piso
repo -> schema : save()
schema++
schema - -> repo
schema- -
end
repo - -> svc
repo- -
svc -> mapper : toDTO(piso)
mapper++
mapper - -> svc
mapper- -
svc - -> ctrl
svc- -
alt caso de sucesso
    ctrl - -> route : Envia um código 201 (PUT)
else caso de insucesso
    ctrl - -> route : Envia um código 404 (NOT FOUND)
end
ctrl- -
@end

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 BST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>